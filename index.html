<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    .game-board{
        position: relative;
        width: 500px;
        height: 500px;
        margin: auto;
        margin-top: 100px;
        border: 1px inset black;
    }
    :root{
        --cell-size: 20px;
    }
    #food{
        position: absolute;
        /* default params */
        height: var(--cell-size);
        width: var(--cell-size);
        background-color: red;

        /* temporary */
        right: 0;

    }
    #snake-head{
        position: absolute;
        height: var(--cell-size);
        width: var(--cell-size);
        background-color: limegreen;
    }   
</style>
<body>
        <div class="game-board">
            <div id="snake">
                <div id="snake-head"></div>
            </div>
            <div id="food"></div>
        </div>
</body>
<script>
    class Config{
        constructor(){
            this.boardSize = 500;
            this.cellSize = 20;
            this.snakeDirection = 'right';
            // snakeColor

            this.snake = document.getElementById('snake-head')
            this.food = document.getElementById('food');
        }
    }
    class Snake extends Config{
        updateGame(){
            // main function that will update game at every tick

            moveSnake(this.snakeDirection);
        }
        moveSnake(direction){
            let newPos;
            switch(direction){
                case 'left':
                    newPos = { 
                        "cellX": this.snakeTrail[length].cellX + cellSize,
                        "cellY": this.snakeTrail[length].cellY 
                    }
                break;
                case 'right':
                    newPos = { 
                        "cellX": this.snakeTrail[length].cellX - cellSize,
                        "cellY": this.snakeTrail[length].cellY 
                    }
                break;
                case 'top':
                    newPos = { 
                        "cellX": this.snakeTrail[length].cellX,
                        "cellY": this.snakeTrail[length].cellY + cellSize 
                    }
                break;
                case 'down':
                    newPos = { 
                        "cellX": this.snakeTrail[length].cellX,
                        "cellY": this.snakeTrail[length].cellY + cellSize
                    }
                break;
            }
            //checking all snake cells if newPos matches snake tail cell
            for(let i = 0; i < this.snakeTrail.length-3; i++){
                if( this.snakeTrail[i] === newPos){
                    //pause game
                    //or eat tail and coninue playing, sounds more fun
                }
            }
            if(this.foodPos === newPos){
                //add new coordinate to array and new div to represent new cell
                //Points++
                //spawn(this.food);
            }
            //Method:3
            // somehow get last cell div positions and set them to newPos.x and y
            // this.snakeTrail.push(newPos)
            // this.snakeTrail.shift()
        }
        spawn(element){
            //generate random coords so food is inside the board and not on snake position
            let randX = Math.floor(Math.random()*this.boardSize); //because of floor 500 will never be reached so foodX will be max 490
            let foodX = randX - randX%this.cellSize;

            let randY = Math.floor(Math.random()*this.boardSize);
            let foodY = randY - randY%this.cellSize;

            element.style.left = foodX;
            element.style.top = foodY;
        }

    }
    
    const game = new Snake()
    game.spawn(game.food);
    game.spawn(game.snake);

    // snake.spawnSnake();

    setInterval(() => {

        game.updateGame();
    }, 1000);

    // event listeners that will change game.snakeDirection based on keys pressed
    
</script>
</html>